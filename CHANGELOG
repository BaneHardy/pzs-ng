PZS-NG CHANGELOG
----------------

v1.0.9  --> 1.0.x  :
		- fixed a bug with userstats over 2TB.
		- added support for (xvid) yv12 codec.
		- fixed a bug where .message showed full path to releasedir in stats.
		- fixed a bug in the subdir detection routine.
		- never search for sfv in a sample dir.

v1.0.8  --> 1.0.9  : (r2291)
		- fixed a bug in showlog.
		- fixed a bug with no-nfo symlinks being created if if nfo existed.
		- added Pee's AutoOp.tcl plugin (untested).
		- added option video_types in zsconfig.h - list of video types.
		- added support for sample_script.
		- new var in zsconfig.h - sample_list - list of sample dirs.
		- added support for special announce on sample upload.
		- some new avinfo settings added.
		- New vars in dzsbot.vars: %video_width %video_height %video_fps %video_aspect
		                           %video_type_long %video_type_short %video_audio_hz
		                           %video_audio_channels %video_audio_name
		                           %video_audio_code
		- do not show subdir on !new (showlog binary).
		- more compat with wzdftpd added.
		- added some more mp3 settings.
		- new vars in dzsbot.vars: %vbr_quality %vbr_minimum_bitrate %vbr_noiseshaping
		                           %vbr_stereomode %vbr_unwise %vbr_source
		- disable allow message_file_name if set to "".
		- fixed a cleanup bug when zipfile integrity failed.
		- added support for hiding affils.
		- maziah fixed nfs.zst themefile.
		- added debug output in audiosort-bin and in createlink().
		- psxc-imdb v2.7i.
		- zyrex noticed a typo in stat announce - changed 'mB' to 'MB'.
		- small bug in psxc-imdb.tcl was fixed - resulted in it not working in
		  certain instances.
		- fixed bug with zip_clean only having effect on first uploaded zipfile.

v1.0.7  --> 1.0.8  : (r2252)
		- added support for vbr-old/vbr-new.
		- added more options to zsconfig - error msgs and benchmark output.
		- fix a bug in rescan when scanning new (not previously scanned) dirs.
		- fix a bug with rescan in 'quick' mode.
		- added '2007' and removed '2003' from list of allowed years in mp3.
		- on mp3 group-sort internal releases will not be renamed - only the
		  groupdir will.
		- the zipscript will no longer announce a release twice - dupe uploads
		  will be marked correctly, but no (normal) announce will happen in
		  glftpd.log.
		- added new variable/announce in bot on dupe releaseupload.
		- fixed bug on sfv creation/rescanning when case in sfv does not match
		  case of files.
v1.0.6  --> 1.0.7  : (r2230)
		- updated libcopy to v1.2 - fix for openbsd4.0.
		- added support for not sorting audio in certain dirs.
		- New option in zsconfig.h - audio_nosort_dirs - list of dirs where no
		  audiosorting should take place.
		- remove _INT from groupname in audio_group sorting.
		- added option to ignore certain languages in the mp3 sorting.
		- New option in zsconfig.h - audio_ignored_languages - list of ignored
		  languages.
		- fixed a bug in partial_on_noforce.
		- fixed a bug with no-nfo symlinks and false parentdir.
		- added a new option to incomplete-list.sh.
		- fixed a bug in cleanup where syms with absolute paths was ignored.
		- fix: ignore allowed_types when scanning an sfv.
		- fix: remove sfvdata when encountering a 'bad' sfv.
		- added option to allow slashes in filenames listed in the sfv.
		- New option in zsconfig.h - allow_slash_in_sfv - allow slashes in sfv.
		- added option to create sfv files on rescan.
		- New option in zsconfig.h - create_missing_sfv - option to create sfv files.

v1.0.5  --> 1.0.6  : (r2195)
		- fixed a bug with lenient compare, which mostly affected mp3-releases.
		- fixed a bug re: testing files when sfv was uploaded after releasefile(s).
		- fixed a bug re: broken sfv files, that had files with no crc at the end.
		- fixed a bug re: deny_nfo_upload_in_zip.
		- fixed a bug re: wrong msg to client on certain cases in zipscript-c.
		- added support for lame 3.97 presets.
		- fixed a bug re: uploads to nocheck_dirs.
		- added dl_speedtest - a new binary to measure download speeds.
		- fixed a bug in rescan --quick which did not detect if a previously checked
		  file was missing.
		- added support for speedtesting.
		- New option in zsconfig.h - speedtest_dirs - dirs dedicated to speedtesting.
		- New option in zsconfig.h - speedtest_delfile - keep or delete uploaded file.
		- added special mp3 progressmeter.
		- New option in zsconfig.h - progressmeter_mp3 - how mp3 progressmeter looks
		  like.
		- New option in zsconfig.h - del_progressmeter_mp3 - how mp3 del_progressmeter
		  looks like.
		- added option to chdir() before rescan.
		- New option in zsconfig.h - rescan_chdir_flags - flags needed by the user to
		  chdir() before rescanning a dir. Note: root (uid 0) is always allowed.
		- added support for sfv_lenient.
		- New option in zsconfig.h - sfv_lenient - see certain delimeter chars as the same
		- added support for missing-sfv.
		- New option in zsconfig.h - create_missing_sfv_link - check for missing sfv.
		- New option in zsconfig.h - incomplete_base_sfv_indicator - missing-indicator.
		- New option in zsconfig.h - incomplete_sfv_indicator - missing-indicator.
		- sort by group fixed - but GRPNaME and grpNAME in the same dir. Groupname from
		  the first release sets the default.
v1.0.4  --> 1.0.5  : (r2170)
		- additions/fixes in meij's plugins.
		- added cr0que's mod to move detection of VA mp3 artist to audiosort.c.
		- added cr0que's fix for a bug regarding mp3 releases with subdirs, and how the
		  the symlinks got puckered.
		- added meij's plugin-rewrite of psxc-imdb.tcl with support for directed imdb
		  lookups (previously only the "main" channel(s) would get the result).
		- fixed the malloc()/free() bug introduced with v1.0.3 completely.
		- fixed lastbind problem in GameFAQ and TVRage plugins with encrypted sitechans.
v1.0.3  --> 1.0.4  : (r2149)
		- fixed a malloc()/free() bug introduced with v1.0.3 that made the zs segfault.
		- don't print zipscript_header if it's zero in length.
		- do not extract nfo from zip if an nfo already exists in dir.
		- added more .diz types to be recognized.
		- updated meij's GameFAQ plugin to v.1.5
		- updated meij's TVRage plugin to v1.3
v1.0.2  --> 1.0.3  : (r2137)
		- added meij's TVRage plugin (v1.1)
		- added support for showing pid of users in sitewho (only in --raw, non-ss5 mode)
		- added support for denying resumed/overwritten sfv files.
		- added support for sorting mp3 by language.
		- New option in zsconfig.h - deny_resume_sfv - deny resumed/overwritten sfv files
		- New option in zsconfig.h - audio_language_sort - sort mp3 by language
		- New option in zsconfig.h - audio_language_path - where to put mp3 symlinks
v1.0.1b --> 1.0.2  : (r2130)
		- Fixed a coredump on amd64 in mp3info.
		- Fixed a coredump on amd64 in sitewho.
		- Made cleanup more general - previously it would only cleanup broken.
		  indicators or mp3 symlinks.
		- Small fix in sitewho (reading-config bug, affecting paths and names with =).
		- Small bugfix for imdb-nuker.
		- Fixed statsection support for allup/alldn/etc.
		- Fixed vars for pre announce.
		- Fix: dont show user/group stats if max_*_in_top == 0.
		- Fixed bug 394 - racestats seems to wrap over when alup is over 4TiB.
		- Fixed small compile error with audiosort and some obscure option.
		- Added a small mod to the imdb script that fixes the [b.gif] issue seen recently.
		- Fixed small bugs in dataclean and ng-chown.
		- Added 'spaces_to_dots' option, which'll replace spaces with dots in audio
		  genre dirs.
		- Fixed an obscure bug related to late sfv upload.
		- Fix: do not process 0byte files - weird shit happens.
		- Fixed a bug with no-nfo symlink if nfo upload did not go thru zipscript.
		- Updated README.AMD64 with instructions for ubuntu, gentoo and debian.
		- Added meij's GameFAQ tcl.
		- Fixed the problem with strange chars in tagline.
		- Added rescan mode '--quick' and  'file*' - quickmode will skip already checked
		  files, and file* will only scan files matching pattern.
		- Added new setting in conf (rescan_default_to_quick) which is defaulted to TRUE.
		- Added support for auto-extract nfo from zip.
		- Added support for checking rar for password protection.
		- Added support for removal of bannerfiles from zips (aka project-sl support).
		- Added support for showing pid of user in sitewho (only in --raw mode).
		- New option in zsconfig.h - zip_clean - removes bannerfiles/banned files from
		  zipfiles.
		- New option in zsconfig.h - extract_nfo - will extract the "real" nfo from the
		  zipfiles uploaded.
		- New option in zsconfig.h - deny_nfo_upload_in_zip - will deny nfo uploads in
		  zipdirs - might be a little strict, so this is turned off by default. Meant to
		  stop multiple (banner) nfo files uploads.
		- New option in zsconfig.h - test_for_password - deny passwordprotected rarfiles on
		  site.
		- New option in zsconfig.h - zip_bin - location of the 'zip' binary (inside chroot).
		- New option in zsconfig.h - banned_filelist - location of the list of banned files
		  which is used to remove certain files from zips.
		- New option in zsconfig.h - check_for_banned_files - will check the banned_filelist
		  when uploading files - if one is encountered, the zipscript will deny the upload.

v1.0.1  --> 1.0.1b : (r2040)
		- Fixed a silly bug with the deletion of old links.

v1.0.0  --> 1.0.1  : (r2039)
		- Various ss5 fixes.
		- Various small zipscript bug-fixes.
		- Various small dZSbot bug-fixes.
		- Same checksum & filename in sfv = same file.
		- Bug #378 fixed (dizreader not picking up x/xx) - reported by chotaire.
		- Added better handling of audiosorting. 'rescan' now sorts too! (like
		   zipscript does on complete).
		- New binary, 'audiosort'. 
		   This sorts a dir based on the same critera as rescan/zipscript does,
		   but does not require a completed release (or even a release at all,
		   could be used for non-zipscripted sites).
		   In addition, sorting now deletes any other identically named links,
		   and puts the 'right' one in place of it. :)

v0.6.1	--> 1.0.0  : The changes from the original project-zs by d1 is
			significant. There is nearly no code that has not been
			changed. For a full list of new/changed options, i
			suggest you read README.ZSCONFIG for the zipscript, and
			look at the README for the sitebot. Sitewho has also
			changed a lot and have been given a few new options, so
			check the sitebot.conf and the README.

			In total, there has been over 1800 code updates, so
			i won't list all of those here. I'll just list what
			changes are major ones. The new config options listed
			below can be read about in README.ZSCONFIG.


		----	Changes in the zipscript:

			New config options:
			-------------------
			- dupepath
			- noforce_sfv_first_dirs
			- use_partial_on_noforce
			- audio_nocheck_dirs
			- rescan_nocheck_dirs_allowed
			- strict_path_match
			- sfv_calc_single_fname
			- subdir_list
			- gl_sections
			- short_sitename
			- allowed_types_exemption_dirs
			- check_for_missing_nfo_dirs
			- check_for_missing_nfo_filetypes
			- create_incomplete_links_in_group_dirs
			- days_back_cleanup
			- cleanupdirs_dated
			- always_scan_audio_syms
			- write_complete_message_in_group_dirs
			- hide_group_uploaders
			- hide_gname
			- hide_uname
			- custom_group_dirs_complete_message
			- userellink
			- allow_files_not_in_sfv
			- strict_sfv_check
			- mark_file_as_bad
			- allow_file_resume
			- sleep_on_bad
			- debug_altlog
			- debug_announce
			- ignore_zero_size
			- ignore_zero_size_on_rescan
			- remove_dot_debug_on_delete
			- remove_dot_files_on_delete
			- unzip_bin
			- sfv_cleanup_lowercase
			- sfv_cleanup_crlf
			- deny_double_sfv
			- deny_double_nfo
			- audio_group_sort
			- audio_group_path
			- audio_cbr_check
			- audio_cbr_warn
			- audio_year_warn
			- allowed_genres
			- audio_banned_genre_check
			- audio_allowed_genre_check
			- audio_genre_warn
			- del_banned_release
			- enable_files_ahead
			- newleader_files_ahead
			- min_newleader_size
			- min_update_size
			- min_halfway_size
			- show_stats_from_pos2_only
			- message_file_name
			- incomplete_base_nfo_indicator
			- incomplete_nfo_indicator
			- charbar_missing
			- charbar_filled
			- enable_nfo_script
			- nfo_script
			- enable_mp3_script
			- mp3_script
			- mp3_script_cookies
			- enable_unduper_script
			- unduper_script
			- disable_audio_race
			- disable_audio_sfv
			- disable_audio_update
			- disable_audio_halfway
			- disable_audio_newleader
			- disable_audio_complete
			- disable_audio_norace_halfway
			- disable_audio_norace_complete
			- disable_video_race
			- disable_video_sfv
			- disable_video_update
			- disable_video_halfway
			- disable_video_newleader
			- disable_video_complete
			- disable_video_norace_halfway
			- disable_video_norace_complete
			- disable_rar_race
			- disable_rar_sfv
			- disable_rar_update
			- disable_rar_halfway
			- disable_rar_newleader
			- disable_rar_complete
			- disable_rar_norace_halfway
			- disable_rar_norace_complete
			- disable_zip_race
			- disable_zip_sfv
			- disable_zip_update
			- disable_zip_halfway
			- disable_zip_newleader
			- disable_zip_complete
			- disable_zip_norace_halfway
			- disable_zip_norace_complete
			- disable_other_race
			- disable_other_sfv
			- disable_other_update
			- disable_other_halfway
			- disable_other_newleader
			- disable_other_complete
			- disable_other_norace_halfway
			- disable_other_norace_complete
			- racersplit
			- racersplit_prior
			- chmod_completebar
			- mark_empty_dirs_as_incomplete_on_rescan
			- max_seconds_wait_for_lock
			- lock_optimize
			- ignore_lock_timeout
			- allow_uid_change_in_ng_chown
			- allow_gid_change_in_ng_chown
			- allow_dir_chown_in_ng_chown
			- allow_files_chown_in_ng_chown
			- change_spaces_to_underscore_in_ng_chown


			Changed config options:
			-----------------------
			- zip_dirs,sfv_dirs, group_dirs - dirs not listed in these variables will not be scanned.
			- cleanupdirs - does no longer support dated dirs - those are moved to cleanupdirs_dated
			- allowed_bitrates - renamed to allowed_constant_bitrates
			- del_completebar - some cookies was added, and this variable had to be changed.
			- del_progressmeter - some cookies was added, and this variable had to be changed.


			Removed config options:
			-----------------------
			- site_root - no longer needed
			- audio_genre_check - replaced by audio_banned_genre_check and audio_allowed_genre_check
			- zip_complete_type - all bot output is done in the bot/theme
			- zip_norace_complete_type - all bot output is done in the bot/theme
			- rar_complete_type - all bot output is done in the bot/theme
			- rar_norace_complete_type - all bot output is done in the bot/theme
			- audio_complete_type - all bot output is done in the bot/theme
			- audio_norace_complete_type - all bot output is done in the bot/theme
			- video_complete_type - all bot output is done in the bot/theme
			- video_norace_complete_type - all bot output is done in the bot/theme
			- other_complete_type - all bot output is done in the bot/theme
			- other_norace_complete_type - all bot output is done in the bot/theme
			- pre_stats - all bot output is done in the bot/theme
			- between_stats - all bot output is done in the bot/theme
			- post_stats - all bot output is done in the bot/theme
			- user_top - all bot output is done in the bot/theme
			- user_info - all bot output is done in the bot/theme
			- group_top - all bot output is done in the bot/theme
			- group_info - all bot output is done in the bot/theme
			- fastestfile - all bot output is done in the bot/theme
			- slowestfile - all bot output is done in the bot/theme
			- audio_race - all bot output is done in the bot/theme
			- audio_sfv - all bot output is done in the bot/theme
			- audio_update - all bot output is done in the bot/theme
			- audio_halfway - all bot output is done in the bot/theme
			- audio_newleader - all bot output is done in the bot/theme
			- audio_complete - all bot output is done in the bot/theme
			- audio_norace_halfway - all bot output is done in the bot/theme
			- audio_norace_complete - all bot output is done in the bot/theme
			- video_race - all bot output is done in the bot/theme
			- video_sfv - all bot output is done in the bot/theme
			- video_update - all bot output is done in the bot/theme
			- video_halfway - all bot output is done in the bot/theme
			- video_newleader - all bot output is done in the bot/theme
			- video_complete - all bot output is done in the bot/theme
			- video_norace_halfway - all bot output is done in the bot/theme
			- video_norace_complete - all bot output is done in the bot/theme
			- rar_race - all bot output is done in the bot/theme
			- rar_sfv - all bot output is done in the bot/theme
			- rar_update - all bot output is done in the bot/theme
			- rar_halfway - all bot output is done in the bot/theme
			- rar_newleader - all bot output is done in the bot/theme
			- rar_complete - all bot output is done in the bot/theme
			- rar_norace_halfway - all bot output is done in the bot/theme
			- rar_norace_complete - all bot output is done in the bot/theme
			- other_race - all bot output is done in the bot/theme
			- other_sfv - all bot output is done in the bot/theme
			- other_update - all bot output is done in the bot/theme
			- other_halfway - all bot output is done in the bot/theme
			- other_newleader - all bot output is done in the bot/theme
			- other_complete - all bot output is done in the bot/theme
			- other_norace_halfway - all bot output is done in the bot/theme
			- other_norace_complete - all bot output is done in the bot/theme
			- zip_race - all bot output is done in the bot/theme
			- zip_update - all bot output is done in the bot/theme
			- zip_halfway - all bot output is done in the bot/theme
			- zip_newleader - all bot output is done in the bot/theme
			- zip_complete - all bot output is done in the bot/theme
			- zip_norace_halfway - all bot output is done in the bot/theme
			- zip_norace_complete - all bot output is done in the bot/theme
			- stats_line - all bot output is done in the bot/theme
			- incompletemsg - all bot output is done in the bot/theme
			- sfv_comment - spam removed
			- KEY - shared mem is not used
			- sql_user - sql is not used (never was)
			- sql_pass - sql is not used (never was)
			- sql_host - sql is not used (never was)
			- sql_db - sql is not used (never was)
			- copy_files_to_zip - spam removed
			- includezip - spam removed
			- version - removed from userconfig


			codechanges not directly related to config options:
			---------------------------------------------------
			- glftpd v1.xx and 2.xx supported.
			- the 4GB limit has been removed.
			- max number of files in a release has been changed from 100 to 1024 - this limit can easily be changed later.
			- support for sections added.
			- the shared memory dependency has been removed. This means that it will work on any glftpd version, or other ftpd.
			- some cookies has changed, others removed or added.
			- output to glftpd.log is no longer user-formatted - instead raw cookies are logged.
			- major rewrites removed all known memory leaks and possible core reasons.
			- debug output is vastly improved.
			- mp3 vbr support is added.
			- portability has improved - the most popular platforms are supported.
			- partial amd64-support - you need to compile in m32 mode, but the zipscript works.
			- smart handling of double sfv make sure a false sfv isn't uploaded.
			- improved handling of sfv content.
			- a locking mechanism is added, which prevent race conditions and wrongly marked incomplete releases.
			- the crc table was replaced with a better/correct one, which helps on large file releases.
			- all bins are changed to run under chroot only.
			- cleanup now removes broken links and lists incomplete releases
			- compile options like --with-ss5 give ss5 support.
			- the zipscript will calculate the crc of the file if no crc (0) is sent from glftpd.
			- cleanup now works as a cscript to 'site nuke' and 'site wipe'
			- datacleaner now works as a cscript to 'RMD' and 'site nuke'
			- a banned (mp3)-release can be deleted automatically after first file, saving bw and hd-space.
			- ng-chown (a new bin) allows you to chown files/dirs. An example of its use is included.
			- ng-undupe (a new bin) will undupe files that fail (on rescan for instance) allowing the file to be re-uploaded.
			- upgrading is easy - there is no need to rewrite the config for each upgrade - just copy it over.
			- zsconfig.h now only holds changes to the defaults, ie on upgrades new options will be used with default values.
			- the zipscript can be run from (chroot'ed) shell, allowing for easier debugging (and execution from scripts).
			- rescan is "safe" - it will not remove files that are being uploaded.


		----	Changes in the sitebot:

			Numerous new IRC commands: !leechers, !idlers, !uploaders,
			!new, !nukes, !unnukes, !search, and !uptime.

			A new plug-in system, which makes it easier for users to
			add custom features without having to directly modify the
			source files. There are several example plug-ins included;
			such as a pre-time check, channel kick on deluser, and
			an IRC nick to FTP user mapping plug-in.

			Invite users to private channels based on their name,
			group, or flags. For example, one could invite all
			users with the "1" flag to #Staff.

			dZSbot can announce sysop.log and login.log events, or
			redirect them to your staff channel.

			The FTP bouncer check now supports explicit secure connections,
			commonly referred to as "AUTH TLS".

			The bot now uses a theming system to customize channel
			announces. A preview system is included allowing you
			to view your theme before using it.

			Easier configuration - if an option isn't defined the
			default value will be used. This makes upgrading much easier,
			since there's no need to reconfigure the bot for each update.

			Full support for glftpd v1.x and v2.x.

			Better error control - instead of crashing, the bot
			will output what's wrong in the party line.


		----	Changes in sitebot scripts/addons:

			A few new scripts have been added.

			Some scripts have been revised, others rewritten.


		----	Changes in sitewho:

			A lot of the code have been rewritten.

			A few new options have been added.

			Full support for glftpd v1.x and v2.x.


		----	Changes in scripts/:

			A few scripts have been removed, other added and some
			revised/rewritten/replaced.






--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
				END OF CHANGELOG
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
